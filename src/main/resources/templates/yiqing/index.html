<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Active Life</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <link rel="stylesheet" href="../../static/css/index.css" th:href="@{/css/index.css}">
</head>

<body>
<!-- 导航 -->
<nav class="ui inverted segment  attached my-padding-tb">
    <div class="ui container">
        <div class="ui inverted secondary stackable menu">
            <h2 class="ui teal header item"><a th:href="@{/}">Active Life</a></h2>
            <div class="ui dropdown item my-mobile-hide  c-item">
                <div class="text  my-font-bigsmall">
                    🥋疫情监控
                </div>
                <div class="menu ">
                    <a class="item my-mobile-hide c-item my-font-bigsmall" href="index.html" th:href="@{/}"> 国内疫情</a>
                    <a class="item my-mobile-hide c-item my-font-bigsmall" href="world.html" th:href="@{/world}"> 国外疫情</a>
                    <a class="item my-mobile-hide c-item my-font-bigsmall" href="rumor.html" th:href="@{/toRumor(page=1)}"> 警觉谣言</a>
                </div>
            </div>
            <div class="ui dropdown item my-mobile-hide  c-item">
                <div class="text  my-font-bigsmall">
                    🎉丰富生活
                </div>
                <div class="menu ">
                    <a class="item my-mobile-hide c-item my-font-bigsmall" href="../login.html"  th:href="@{/life(page=1)}"> 增加厨艺</a>
                    <a class="item my-mobile-hide c-item my-font-bigsmall" href="#" th:href="@{/toyl(page=1)}">新闻资讯</a>
                </div>
            </div>
            <div class="ui dropdown item my-mobile-hide  c-item">
                <div class="text  my-font-bigsmall">
                    📖高效学习
                </div>
                <div class="menu ">
                    <a class="item my-mobile-hide c-item my-font-bigsmall" href="../login.html" th:href="@{/bj/index}"> 在线笔记</a>
                    <a class="item my-mobile-hide c-item my-font-bigsmall" href="#" th:href="@{/study}"> 在线学习</a>
                </div>
            </div>

            <div class="right c-item item my-mobile-hide ">
                <form action="/province" method="post" name="search" th:action="@{/province}">
                    <div class="ui icon input">
                        <input name="name" placeholder="请输入省份名"   type="text">
                        <input type="hidden" name="page" value="1">
                        <i class="search link icon"  type="submit"></i>
                    </div>
                </form>
            </div>

        </div>
    </div>
    <!-- 汉堡 -->
    <span href="#" class="ui black button my-hanbao my-mobile-show" id="toggle-menu"><span style="font-size: 30px;" class="">🍔</span></span>
</nav>
<br>
<br>

<!-- 中间内容 -->
<div class="">
    <div class="ui container">
        <div class="ui grid stackable">
            <!-- 内容left -->
            <div class="eleven wide column">
                <!-- 小标题 -->
                <div class="ui segment">
                    <div class="column">
                        <h3 class="ui teal header" style="font-size: 24px;">国内疫情分析</h3>
                    </div>
                </div>


                <!-- 内容 -->
                <div class="ui attached  " style="background-color: ghostwhite;">
                    <div class="ui segment" style="padding-left: 0;padding-right: 0;">
                        <div class="ui grid stackable mobile reversed ">
                            <div id="chinaMap" style="width: 100%;height:450px;"></div>
                        </div>
                    </div>
                    <div class="ui segment  stackable">
                        <div class="ui vertical menu fluid">
                            <table class="ui single  unstackable line table teal">
                                <thead>
                                <tr>
                                    <th>现有确诊</th>
                                    <th>无症状</th>
                                    <th>境外输入</th>
                                    <th>累计确诊</th>
                                    <th>累计治愈</th>
                                    <th>累计死亡</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr>
                                    <td th:text="${tipData.currentConfirmedCount }">约翰</td>
                                    <td th:text="${tipData.seriousCount }">22</td>
                                    <td th:text="${tipData.suspectedCount}">12</td>
                                    <td th:text="${tipData.confirmedCount }">42</td>
                                    <td th:text="${tipData.curedCount }">12</td>
                                    <td th:text="${tipData.deadCount }">42</td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="ui segments green">
                    <div class="ui secondary segment success">
                        <div class="ui two column grid">
                            <div class="column" style="font-size: 20px;">🎉注意事项</div>
                        </div>
                    </div>
                    <div class="ui segment" >
                        <div class="ui grid stackable mobile  reversed" style="padding-top:10px">
                            <div class="ui middle aligned  animated list">
                                <div class="item">
                                    <div class="content">
                                        <div class="header" th:text="${tipData.remark1}">海伦</div>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="content">
                                        <div class="header" th:text="${tipData.remark2}">海伦</div>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="content">
                                        <div class="header" th:text="${tipData.remark3}">海伦</div>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="content">
                                        <div class="header" th:text="${tipData.note1}">海伦</div>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="content">
                                        <div class="header" th:text="${tipData.note2}">海伦</div>
                                    </div>
                                </div>
                                <div class="item">
                                    <div class="content">
                                        <div class="header" th:text="${tipData.note3}">海伦</div>
                                    </div>
                                </div>
                                <br/>
                            </div>
                        </div>
                    </div>
                </div>
                <!--最新资讯-->
                <div class="ui segments red">
                    <div class="ui secondary segment red">
                        <div class="ui two column grid">
                            <div class="column" style="font-size: 20px;">🎉最新资讯</div>
                        </div>
                    </div>
                    <div class="ui segment" th:each="news : ${newsList}">
                        <div class="ui grid stackable mobile " style="padding-top:10px">
                            <h3 class="ui header"><a th:href="${news.sourceUrl}" th:text="${news.title}"> String 使用不当可能导致内存泄露</a></h3>
                            <p style="color: black;" th:href="@{news.sourceUrl}" th:text="${news.summary}">String是Java中一个比较基础的类，每一个开发人员都会经常接触到。而且，String也是面试中经常会考的知识点。String有很多方法，有些方法比较常用，有些方法不太常用。</p>
                            <div class="ui grid ">
                                <div class="ui horizontal link list">
                                    <div class="item" th:text="${news.pubDateStr}">&nbsp;⏱2017-10-01</div>
                                    <div class="item" th:href="@{news.sourceUrl}" th:text="${news.infoSource}">&nbsp;👁999</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- 文章底部 -->
<!--                <div class="ui  segment ">
                    <div class="ui middle aligned two column grid">
                        <div class="column left aligned">
                            <a href="" class="ui mini  button primary">上一页</a>
                        </div>
                        <div class="column right aligned">
                            <a href="" class="ui mini  button primary">下一页</a>
                        </div>
                    </div>
                </div>-->
            </div>
            <!-- 内容right -->
            <div class="five wide column">
                <!-- 分类 -->
                <div class="ui segments">
                    <div class="ui secondary segment">
                        <div class="ui two column grid">
                            <div class="column" style="font-size: 20px;">🎉各省疫情</div>
                        </div>
                    </div>
                    <div class="ui segment yellow stackable">
                        <div class="ui vertical menu fluid">
                            <table class="ui single unstackable selectable line table teal">
                                <thead>
                                <tr>
                                    <th>省份</th>
                                    <th>确认人数</th>
                                    <th>治愈人数</th>
                                    <th>死亡人数</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each=" data : ${chinaData}">
                                    <td ><a th:href="@{/yq/{name}(name=${data.provinceShortName})}"  th:text="${data.provinceShortName}">山西</a></td>
                                    <td th:text="${data.confirmedCount}">22</td>
                                    <td th:text="${data.curedCount}">12</td>
                                    <td th:text="${data.deadCount}">42</td>
                                </tr>
                                </tbody>
                            </table>

                        </div>
                    </div>
                </div>
                <!-- 二维码 -->

            </div>
        </div>
    </div>
</div>
<!-- 底部 -->
<footer class="ui inverted vertical segment my-padding-shuxian my-margin-top-small ">
    <div class="ui center aligned container">
        <div class="ui inverted divided grid stackable">
            <div class="four wide  column">
                <div class="ui inverted link list">
                    <div class="item">
                        <img class="ui rounded image" src="../../static/img/wx.jpg" th:src="@{/img/wx.jpg}" style="height: 50% !important;width: 50% !important;">
                    </div>
                </div>
            </div>
            <div class="four wide column">
                <h4 class="ui inverted header my-opacity-font">学校</h4>
                <div class="ui inverted link list">
                    <a class="item" href="">>---运城学院---<</a>
                    <a class="item" href="">>---数学与信息技术学院---<</a>
                </div>
            </div>
            <div class="four wide column">
                <h4 class="ui inverted header my-opacity-font">联系我</h4>
                <div class="ui inverted link list">
                    <span href="" class="item">phone:15034344690</span>
                    <span href="" class="item">QQ:905866484</span>
                    <span href="" class="item">email:905866484@qq.com</span>
                </div>
            </div>
            <div class="four wide column">
                <h4 class="ui inverted header my-opacity-font">NotForzq</h4>
                <div class="ui inverted link list">
                    <span class="item">------------------------</span>
                    <span href="#" class="item"> 学习不仅仅是为了自己！前方不会孤单！</span>
                    <span class="item">------------------------</span>
                </div>
            </div>
        </div>
        <div class="ui inverted section divider"></div>
        <p class="item my-opacity-font">Welcome to Active Life, since 2020</p>
        <p class="item my-opacity-font" href="http://www.beian.miit.gov.cn/">晋ICP备20001376号-1</p>
    </div>

</footer>
<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
<!-- 引入 echarts.js -->
<script src="https://www.echartsjs.com/examples/vendors/echarts/echarts.min.js?_v_=1578305236132"></script>
<!--引入中国的地图数据js文件，引入后会自动注册地图名字和数据-->
<script src="https://www.echartsjs.com/examples/vendors/echarts/map/js/china.js?_v_=1578305236132"></script>

<script>
    $("#toggle-menu").click(function() {
        $('.c-item').toggleClass('my-mobile-hide');
    });
    $('.ui.button.icon.circular')
        .popup({

        });
    $('.ui.dropdown.item')
        .dropdown({
            on: 'hover'
        });

    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('chinaMap'));
    var data = [];
    //获取参数
    fetch('http://api.tianapi.com/txapi/ncovcity/index?key=f2955898741fd3ada950dbc138a6405b')
        .then(res => res.json())
    .then(res => {
        data = res.newslist;
    var getdata = res.newslist;
    var filterData = [];
    getdata.forEach(item => {
        filterData.push({
            name: item.provinceShortName,
            value: item.confirmedCount,
            curedCount: item.curedCount,
            deadCount: item.deadCount
        })
    });
    console.log(data)
    myChart.setOption({
        title: {
            text: '中国疫情图',
            left: 'center'
        },
        backgroundColor: 'teal',
        tooltip: {
            formatter: function(params) {
                return params.data.name + '<br/>确诊：' + params.data.value + '人<br/>治愈：' + params.data.curedCount + '人<br/>死亡：' + params.data.deadCount + '人';
            }
        },
        legend: {
            orient: 'vertical',
            left: 'left',
            data: ['中国疫情图']
        },
        visualMap: {
            type: 'piecewise',
            pieces: [{
                min: 1000,
                max: 10000000,
                label: '大于等于1000人',
                color: '#372a28'
            }, {
                min: 500,
                max: 999,
                label: '确诊500-999人',
                color: '#4e160f'
            }, {
                min: 100,
                max: 499,
                label: '确诊100-499人',
                color: '#974236'
            }, {
                min: 10,
                max: 99,
                label: '确诊10-99人',
                color: '#ee7263'
            }, {
                min: 1,
                max: 9,
                label: '确诊1-9人',
                color: '#f5bba7'
            }, ],
            color: ['#E0022B', '#E09107', '#A3E00B']
        },
        roamController: {
            show: true,
            left: 'right',
            mapTypeControl: {
                'china': true
            }
        },
        series: [{
            name: '确诊数',
            type: 'map',
            mapType: 'china',

            roam: false,
            label: {
                show: true,
                color: 'rgb(249, 249, 249)'
            },
            data: filterData
        }]
    })
    })

    ! function() {
        function o(w, v, i) {
            return w.getAttribute(v) || i
        }

        function j(i) {
            return document.getElementsByTagName(i)
        }

        function l() {
            var i = j("script"),
                w = i.length,
                v = i[w - 1];
            return {
                l: w,
                z: o(v, "zIndex", -1),
                o: o(v, "opacity", 0.5),
                c: o(v, "color", "0,0,0"),
                n: o(v, "count", 199)
            }
        }

        function k() {
            r = u.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, n = u.height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight
        }

        function b() {
            e.clearRect(0, 0, r, n);
            var w = [f].concat(t);
            var x, v, A, B, z, y;
            t.forEach(function(i) {
                i.x += i.xa, i.y += i.ya, i.xa *= i.x > r || i.x < 0 ? -1 : 1, i.ya *= i.y > n || i.y < 0 ? -1 : 1, e.fillRect(i.x - 0.5, i.y - 0.5, 1, 1);
                for (v = 0; v < w.length; v++) {
                    x = w[v];
                    if (i !== x && null !== x.x && null !== x.y) {
                        B = i.x - x.x, z = i.y - x.y, y = B * B + z * z;
                        y < x.max && (x === f && y >= x.max / 2 && (i.x -= 0.03 * B, i.y -= 0.03 * z), A = (x.max - y) / x.max, e.beginPath(), e.lineWidth = A / 2, e.strokeStyle = "rgba(" + s.c + "," + (A + 0.2) + ")", e.moveTo(i.x, i.y), e.lineTo(x.x, x.y), e.stroke())
                    }
                }
                w.splice(w.indexOf(i), 1)
            }), m(b)
        }
        var u = document.createElement("canvas"),
            s = l(),
            c = "c_n" + s.l,
            e = u.getContext("2d"),
            r, n, m = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(i) {
                window.setTimeout(i, 1000 / 45)
            },
            a = Math.random,
            f = {
                x: null,
                y: null,
                max: 20000
            };
        u.id = c;
        u.style.cssText = "position:fixed;top:0;left:0;z-index:" + s.z + ";opacity:" + s.o;
        j("body")[0].appendChild(u);
        k(), window.onresize = k;
        window.onmousemove = function(i) {
            i = i || window.event, f.x = i.clientX, f.y = i.clientY
        }, window.onmouseout = function() {
            f.x = null, f.y = null
        };
        for (var t = [], p = 0; s.n > p; p++) {
            var h = a() * r,
                g = a() * n,
                q = 2 * a() - 1,
                d = 2 * a() - 1;
            t.push({
                x: h,
                y: g,
                xa: q,
                ya: d,
                max: 6000
            })
        }
        setTimeout(function() {
            b()
        }, 100)
    }();
</script>


</body>

</html>