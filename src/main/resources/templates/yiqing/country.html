<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Active Life</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <link rel="stylesheet" href="../../static/css/index.css" th:href="@{/css/index.css}">
</head>

<body>
    <!-- 导航 -->
    <nav class="ui inverted segment attached my-padding-tb">
        <div class="ui container">
            <div class="ui inverted secondary stackable menu">
                <h2 class="ui teal header item"><a th:href="@{/}">Active Life</a></h2>
                <div class="ui dropdown item my-mobile-hide  c-item">
                    <div class="text  my-font-bigsmall">
                        🥋疫情监控
                    </div>
                    <div class="menu ">
                        <a class="item my-mobile-hide c-item my-font-bigsmall" href="index.html" th:href="@{/}"> 国内疫情</a>
                        <a class="item my-mobile-hide c-item my-font-bigsmall" href="world.html" th:href="@{/world}"> 国外疫情</a>
                        <a class="item my-mobile-hide c-item my-font-bigsmall" href="rumor.html" th:href="@{/toRumor(page=1)}"> 警觉谣言</a>
                    </div>
                </div>
                <div class="ui dropdown item my-mobile-hide  c-item">
                    <div class="text  my-font-bigsmall">
                        🎉丰富生活
                    </div>
                    <div class="menu ">
                        <a class="item my-mobile-hide c-item my-font-bigsmall" href="../login.html"  th:href="@{/life(page=1)}"> 增加厨艺</a>
                        <a class="item my-mobile-hide c-item my-font-bigsmall" href="#" th:href="@{/toyl(page=1)}">新闻资讯</a>
                    </div>
                </div>
                <div class="ui dropdown item my-mobile-hide  c-item">
                    <div class="text  my-font-bigsmall">
                        📖高效学习
                    </div>
                    <div class="menu ">
                        <a class="item my-mobile-hide c-item my-font-bigsmall" href="../login.html" th:href="@{/bj/index}"> 在线笔记</a>
                        <a class="item my-mobile-hide c-item my-font-bigsmall" href="#" th:href="@{/study}"> 在线学习</a>
                    </div>
                </div>

                <div class="right c-item item my-mobile-hide ">
                    <form action="/country" method="post" name="search" th:action="@{/country}">
                        <div class="ui icon input">
                            <input name="name" placeholder="请输入国家名"   type="text">
                            <i class="search link icon"  type="submit"></i>
                        </div>
                    </form>
                </div>


            </div>
        </div>
        <!-- 汉堡 -->
        <span href="#" class="ui black button my-hanbao my-mobile-show" id="toggle-menu"><span style="font-size: 30px;" class="">🍔</span></span>
    </nav>
    <br>
    <br>

    <!-- 中间内容 -->
    <div class="">
        <div class="ui container">
            <div class="ui grid stackable">
                <!-- 内容left -->
                <div class="one wide column"></div>
                <div class="fourteen wide column">
                    <!-- 小标题 -->
                    <div class="ui segment">
                        <div class="column">
                            <h3 class="ui teal header" style="font-size: 24px;"><span th:text="${country.getProvinceName()}" id="countryName">美国</span>疫情分析</h3>
                        </div>
                    </div>
                    <!-- 内容 -->
                    <div class="ui attached  " style="background-color: ghostwhite;">
                        <div class="ui segment" style="padding-left: 0;padding-right: 0;">
                            <div class="ui grid stackable mobile reversed ">
                                <div id="worldT" style="width: 100%;height:600px;"></div>
                            </div>
                        </div>
                        <div class="ui segment  stackable">

                            <div class="ui  segment secondary vertical menu fluid">
                                <div class="column" style="font-size: 20px;">😭疫情较严重国家</div>
                                <table class="ui single unstackable line table green">
                                    <thead>
                                    <tr>
                                        <th>国家</th>
                                        <th>现有确诊</th>
                                        <th>累计确诊</th>
                                        <th>累计治愈</th>
                                        <th class="hide-phone">累计死亡</th>
                                        <th>死亡率</th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr>
                                        <td th:text="${country.getProvinceName() }">中国</td>
                                        <td th:text="${country.getCurrentConfirmedCount() }">100</td>
                                        <td th:text="${country.confirmedCount }">100</td>
                                        <td th:text="${country.curedCount }">100</td>
                                        <td class="hide-phone" th:text="${country.deadCount }">100</td>
                                        <td th:text="${country.getDeadRate()+'%'}">0.01%</td>
                                    </tr>
                                    <tr> </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
                <div class="one wide column"></div>
                <!-- 内容right -->
            </div>
        </div>
    </div>
    <!-- 底部 -->
    <footer class="ui inverted vertical segment my-padding-shuxian my-margin-top-small ">
        <div class="ui center aligned container">
            <div class="ui inverted divided grid stackable">
                <div class="four wide  column">
                    <div class="ui inverted link list">
                        <div class="item">
                            <img class="ui rounded image" src="../../static/img/wx.jpg" th:src="@{/img/wx.jpg}" style="height: 50% !important;width: 50% !important;">
                        </div>
                    </div>
                </div>
                <div class="four wide column">
                    <h4 class="ui inverted header my-opacity-font">学校</h4>
                    <div class="ui inverted link list">
                        <a class="item" href="">>---运城学院---<</a>
                        <a class="item" href="">>---数学与信息技术学院---<</a>
                    </div>
                </div>
                <div class="four wide column">
                    <h4 class="ui inverted header my-opacity-font">联系我</h4>
                    <div class="ui inverted link list">
                        <span href="" class="item">phone:15034344690</span>
                        <span href="" class="item">QQ:905866484</span>
                        <span href="" class="item">email:905866484@qq.com</span>
                    </div>
                </div>
                <div class="four wide column">
                    <h4 class="ui inverted header my-opacity-font">NotForzq</h4>
                    <div class="ui inverted link list">
                        <span class="item">------------------------</span>
                        <span href="#" class="item"> 学习不仅仅是为了自己！前方不会孤单！</span>
                        <span class="item">------------------------</span>
                    </div>
                </div>
            </div>
            <div class="ui inverted section divider"></div>
            <p class="item my-opacity-font">Welcome to Active Life, since 2020</p>
            <p class="item my-opacity-font" href="http://www.beian.miit.gov.cn/">晋ICP备20001376号-1</p>
        </div>

    </footer>
    <script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <!-- 引入 echarts.js -->
    <script src="https://www.echartsjs.com/examples/vendors/echarts/echarts.min.js?_v_=1578305236132"></script>
    <script src="../../static/js/echarts.js" th:href="@{/js/echarts.js}"></script>
    <script>
        $("#toggle-menu").click(function() {
            $('.c-item').toggleClass('my-mobile-hide');
        });
        $('.ui.button.icon.circular')
            .popup({
            });
        $('.ui.dropdown.item')
            .dropdown({
                on: 'hover'
            });

        // 基于准备好的dom，初始化echarts实例
        var country = document.getElementById("countryName");

        var worldT = echarts.init(document.getElementById('worldT'));
        //获取参数
        $.post('http://api.tianapi.com/txapi/ncovabroad/index?key=f2955898741fd3ada950dbc138a6405b',function (res) {
            console.log(res);
            var datas = [];
            var dataAxis = [];
            var getdata = res.newslist;
            console.log(res.newslist);
            getdata.forEach(item => {
                if(item.provinceName == country.innerText){
                    datas.push(item.currentConfirmedCount);
                    dataAxis.push("现有确诊");
                    datas.push(item.confirmedCount);
                    dataAxis.push("累计确诊");
                    datas.push(item.curedCount);
                    dataAxis.push("累计治愈");
                    datas.push(item.deadCount);
                    dataAxis.push("累计死亡");
                }
        });
            var yMax = 500;
            var dataShadow = [];
            for (var i = 0; i < datas.length; i++) {
                dataShadow.push(yMax);
            }
            console.log(datas);
            console.log(dataAxis);
            worldT.setOption({
                xAxis: {
                    data: dataAxis,
                    type: 'category'
                },
                yAxis: {
                    axisLine: {
                        show: false
                    },
                    axisTick: {
                        show: false
                    },
                    axisLabel: {
                        textStyle: {
                            color: '#999'
                        }
                    }
                },
                dataZoom: [
                    {
                        type: 'inside'
                    }
                ],
                series: [
                    { // For shadow
                        type: 'bar',
                        itemStyle: {
                            color: 'rgba(255,60,0,0.05)'
                        },
                        barGap: '-100%',
                        barCategoryGap: '40%',
                        data: dataShadow,
                        animation: false
                    },
                    {
                        type: 'bar',
                        itemStyle: {
                            color: new echarts.graphic.LinearGradient(
                                0, 0, 0, 1,
                                [
                                    {offset: 0, color: '#83bff6'},
                                    {offset: 0.5, color: '#188df0'},
                                    {offset: 1, color: '#188df0'}
                                ]
                            )
                        },
                        emphasis: {
                            itemStyle: {
                                color: new echarts.graphic.LinearGradient(
                                    0, 0, 0, 1,
                                    [
                                        {offset: 0, color: '#2378f7'},
                                        {offset: 0.7, color: '#2378f7'},
                                        {offset: 1, color: '#83bff6'}
                                    ]
                                )
                            }
                        },
                        data: datas
                    }
                ]
            });
        })



    </script>
<!--    背景-->
    <script>
        ! function() {
            function o(w, v, i) {
                return w.getAttribute(v) || i
            }

            function j(i) {
                return document.getElementsByTagName(i)
            }

            function l() {
                var i = j("script"),
                    w = i.length,
                    v = i[w - 1];
                return {
                    l: w,
                    z: o(v, "zIndex", -1),
                    o: o(v, "opacity", 0.5),
                    c: o(v, "color", "0,0,0"),
                    n: o(v, "count", 199)
                }
            }

            function k() {
                r = u.width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth, n = u.height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight
            }

            function b() {
                e.clearRect(0, 0, r, n);
                var w = [f].concat(t);
                var x, v, A, B, z, y;
                t.forEach(function(i) {
                    i.x += i.xa, i.y += i.ya, i.xa *= i.x > r || i.x < 0 ? -1 : 1, i.ya *= i.y > n || i.y < 0 ? -1 : 1, e.fillRect(i.x - 0.5, i.y - 0.5, 1, 1);
                    for (v = 0; v < w.length; v++) {
                        x = w[v];
                        if (i !== x && null !== x.x && null !== x.y) {
                            B = i.x - x.x, z = i.y - x.y, y = B * B + z * z;
                            y < x.max && (x === f && y >= x.max / 2 && (i.x -= 0.03 * B, i.y -= 0.03 * z), A = (x.max - y) / x.max, e.beginPath(), e.lineWidth = A / 2, e.strokeStyle = "rgba(" + s.c + "," + (A + 0.2) + ")", e.moveTo(i.x, i.y), e.lineTo(x.x, x.y), e.stroke())
                        }
                    }
                    w.splice(w.indexOf(i), 1)
                }), m(b)
            }
            var u = document.createElement("canvas"),
                s = l(),
                c = "c_n" + s.l,
                e = u.getContext("2d"),
                r, n, m = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(i) {
                    window.setTimeout(i, 1000 / 45)
                },
                a = Math.random,
                f = {
                    x: null,
                    y: null,
                    max: 20000
                };
            u.id = c;
            u.style.cssText = "position:fixed;top:0;left:0;z-index:" + s.z + ";opacity:" + s.o;
            j("body")[0].appendChild(u);
            k(), window.onresize = k;
            window.onmousemove = function(i) {
                i = i || window.event, f.x = i.clientX, f.y = i.clientY
            }, window.onmouseout = function() {
                f.x = null, f.y = null
            };
            for (var t = [], p = 0; s.n > p; p++) {
                var h = a() * r,
                    g = a() * n,
                    q = 2 * a() - 1,
                    d = 2 * a() - 1;
                t.push({
                    x: h,
                    y: g,
                    xa: q,
                    ya: d,
                    max: 6000
                })
            }
            setTimeout(function() {
                b()
            }, 100)
        }();
    </script>

</body>

</html>